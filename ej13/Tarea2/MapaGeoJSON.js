
mapboxgl.accessToken = 'pk.eyJ1IjoibWFyaWV0ZTE3IiwiYSI6ImNrd2J5c2JyeTFndDMydXFtYjMweXFpcWEifQ.0SKmdulKoTv4TGHbrJWvAg';

var geojson = {
    'type': 'FeatureCollection',
    'features': [
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.84476, 43.3603]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Mario Lada Martinez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.7762, 43.2518]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Mario Lada Rodriguez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.7962, 42.2518]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Martin Lada'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.2833, 43.34]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Martin Lada'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.7862, 43.2618]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Rodrigo Lada'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.7462, 43.2718]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Rodrigo Lada'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-4.7662, 43.3618]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Carmen Jove'
            }
        }, {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-4.5462, 43.2118]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Carmen Jove'
            }
        }, {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.7762, 43.2518]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Josefina Rodriguez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.7462, 43.2418]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Luis Manuel Alvarez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-3.67, 40.5]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Luis Manuel Alvarez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.238, 43.5747]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Maria Teresa Cuetara'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.7762, 43.2518]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Maria Teresa Cuetara'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.9091, 42.2975]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Belen Martinez Almanza'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.0735, 42.1928]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Manuel Martinez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.0735, 42.1928]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Fernando Martinez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.0735, 42.1928]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Fernando Martinez'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.0865, 42.1925]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Maria del Rosario Turrado'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.0865, 42.1925]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Maria del Rosario Turrado'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.0865, 42.1925]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Guadalupe Almanza'
            }
        }
        , {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.0865, 42.2025]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Fernando Almanza'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.1865, 42.2225]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Fernando Almanza'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-5.3719, 42.538]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Nacimiento de Rosa Turrado'
            }
        },
        {
            'type': 'Feature',
            'geometry': {
                'type': 'Point',
                'coordinates': [-6.1265, 42.235]
            },
            'properties': {
                'title': 'Mapbox',
                'description': 'Fallecimiento de Rosa Turrado'
            }
        }
    ]
};

const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v10',
    center: [-5.844, 43.36],
    zoom: 3
});

// add markers to map
for (const feature of geojson.features) {
    // create a HTML element for each feature
    const el = document.createElement('div');
    el.className = 'marker';

    // make a marker for each feature and add it to the map
    new mapboxgl.Marker(el)
        .setLngLat(feature.geometry.coordinates)
        .setPopup(
            new mapboxgl.Popup({ offset: 25 }) // add popups
                .setHTML(
                    `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
                )
        )
        .addTo(map);
}


